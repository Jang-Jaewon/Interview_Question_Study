# OS


- [Processor, Program, Process의 차이](#%EF%B8%8F-processor-program-process의-차이)
- [프로세스와 스레드의 차이](#%EF%B8%8F-프로세스와-스레드의-차이)
- [멀티프로그래밍과 멀티태스킹](#%EF%B8%8F-멀티프로그래밍과-멀티태스킹)
- [스레드의 특징과 멀티스레딩](#%EF%B8%8F-스레드의-특징과-멀티스레딩)
- [멀티프로세싱과 멀티스레딩의 장단점 이해](#%EF%B8%8F-멀티프로세싱과-멀티스레딩-장단점-이해)

<br>

## 💡 Processor, Program, Process의 차이

> 프로세서(processor)는 연산 작업을 수행하는 물리적 장치인, CPU를 의미한다. 프로그램(program)은 disk에 저장된 코드 또는 명령어의 집합을 의미하고 이 파일을 실행시켜 memory에 올리면 프로세스(process)라 한다. 즉, 프로그램(program)이 파일로 있다가 실행되어 이 일부가 memory에 올라간 상태가 프로세스(process)이고, 프로세서(processor)에 의해 처리되다.

### 추가적인 내용 기술

- 컴퓨터의 구성은 하드웨어, 운영체제, 응용프로그램으로 나뉘는데, 이 중 하드웨어는 대표적으로 CPU, Memory, Disk 구성되어 있다.
- 여기서 CPU는 processor를 의미하며, 시스템을 통제하고 프로그램을 실행하기 위한 모든 전기 신호의 연산을 담당한다.
- Memory는 프로그램이 실행되는 공간으로 전기신호를 임시로 저장하는 휘발성 저장장치인 RAM 이다. 따라서 PC가 종료되면 모두 사라지지만 빠르다는 장점 갖고 있다.
- Disk는 HDD, SSD 등이 있고, 속도는 느리지만 영구적으로 저장할 수 있다. 파일로 이뤄진 program은 Disk에 저장된다.
- 즉, Disk에 저장된 program을 운영체제에 의해 Memory에 올리는 실행 중인 상태를 process라 하고, processor에 의해 연산 처리가 이뤄진다.

<br>

## 💡️ 프로세스와 스레드의 차이
> 프로세스는 운영체제로부터 자원을 할당 받아 실행하고, 스레드는 프로세스로부터 자원을 할당받아 실행한다. 또한 하나의 프로세스는 여러 스레드를 생성 가능하며, 각 스레드는 개별 스텍을 가지고 프로세스의 전역 메모리 공간을 공유하며 프로그램을 실행한다. 일반적으로 프로세스는 코드/데이터/힙/스택 메모리 영역을 기반으로 실행하고, 스레드는 프로세스 안에서 개별적인 스택을 가지고 코드/데이터/힙 영역을 공유하며 실행된다.


### 추가적인 내용 기술
- 프로세스는 프로그램의 일부가 실행되어 운영체제로부터 메모리에 할당된 상태로, 운영체제로부터 시스템 자원을 할당받는 작업 단위를 의미한다.
- 프로세스는 최소 1개의 스레드를 가지고, 이를 메인 스레드라한다. 물론 여러개의 스레드를 생성 가능하다.
- 프로세스는 각 각 독립된 메모리 영역(Code, Data, Stack, Heap의 구조)을 할당받아 실행되며, 이에 기본적으로 한 프로세스는 다른 프로세스의 변수나 자료구조에 접근할 수 없다.
- 한 프로세스가 다른 프로세스의 자원에 접근하려면 프로세스 간의 통신(IPC, inter-process communication)을 사용해야 한다.
- 스레드는 한 프로세스 내에서 동작되는 여러 실행의 흐름으로, 스레드는 프로세스 내에서 Stack만 개별적으로 할당받고 Code, Data, Heap 영역은 프로세스와 공유한다.


<br>


## 💡 멀티프로그래밍과 멀티태스킹
> 멀티프로그래밍은 여러개의 프로그램을 동시에 실행시켜, CPU에 의해 순차적으로 처리됨으로서 CPU의 사용률을 극대화시키기 위한 시스템을 의미한다. 이 멀티프로그래밍 방식은 단일 프로세스 시스템의 단점을 개선 하지만, 선생되는 한 프로세스의 CPU 사용률이 길어지면 다른 프로세스는 계속 대기한다는 단점을 가지고 있다. 이에 여러 프로세스가 아주 짧은 시간만 CPU를 점유하여 번갈아가며 연산처리하게 함으로써 마치 동시에 실행되는 것 처럼 CPU 사용 시간을 제어하는 멀티 태스킹을 방식을 고안해냈다. 즉, 멀티 태스킹은 각 프로세스의 CPU 점유 시간을 최소화시켜 각 프로세스의 응답시간을 빠르게하는데 목적이 있다. 아주 짧은 시간 속에서 여러 프로세스들이 응답을하기 때문에 사용자가 느끼기에는 동시에 처리되는 것처럼 느끼기 때문이다. 단, 이 프로세스의 전환을 컨텍스트 스위치라하는데, 컨텍스트 스위치는 무거운 작업이고, 각 프로세스는 독립적인 메모리를 가지고 있기 때문에 프로세스끼리는 데이터 공유가 까다롭다라는 단점이있다. 또한 2000년대 초반 듀얼 코어 CPU가 나타나면서, 듀얼 코어를 효율적으로 사용하기 위한 방안이 필요하게됬다.


### 추가적인 내용 기술
- 프로그램은 컴퓨터가 실행할 수 있는 코드 즉, 명령어들의 집합이고, 프로세스는 컴퓨터에서 실행 중인 프로그램이며 각 각의 프로세는 독립된 메모리 공간을 할당 받는다. 프로세서(CPU)는 이 프로세스에 올라간 명령어를 실행하는 연산장치다.
- IO(Input/Output)는 파일을 읽고 쓰거나, 네트워크의 어딘가와 데이터를 주고 받는 것, 입출력 장치와 데이터를 주고 받는 것을 의미한다.
- 단일 프로세스 시스템은 한 번의 하나의 프로그램만 실행이 가능하기 때문에 CPU 사용률이 좋지 않다. 예를 들어, CPU 작업도 하고 IO 작업도 하는 프로그램을 단일 프로세스에서 실행시킨다고 해보자. 프로그램을 메모리에 올려 실행하면, CPU에 의해 연산 작업이 이뤄지다 IO작업이 필요하면 CPU는 잠시 놀게 된다. 그러다가 또 CPU 작업이 필요할 때 이뤄지기 때문에 그 공백의 기간으로 CPU 효율성이 떨어지게 된다.
- 그래서 이 해결책으로 여러 개의 프로그램을 메모리에 동시에 올려 두고, 실행시키자는 아이디어라 나타났다. 즉, 실행을 동시에하지만, 한 프로그램이 CPU에 의해 처리되다 IO작업으로 인해 메모리에 내려가면, 다른 프로세스가 CPU에 의해 번갈아가며 연산 처리되는 방식이다. 이런 방식의 프로그래밍을 멀티 프로그래밍이라고 한다.
- 이 멀티 프로그래밍 방식은 CPU사용률을 극대화시키는 방법으로 단일 프로세스 시스템의 단점을 개선 했지만, 한 프로세스의 CPU 사용률이 길어지면 다른 프로세스는 계속 대기한다는 단점을 가지고 있다.
- 이에 이러한 멀티 프로그래밍의 단점을 보완하기 위해 프로세스(메모리에 올라가 실행 중인 프로그램)는 한번 CPU를 사용할 때, 아주 짧은 시간(=quantum)만 CPU를 점유하여 번갈아가며 연산처리되도록하는 방식을 고안해냈고, 이를 멀티 태스킹이라 한다. 마치 동시에 실행되는 것처럼 밀리세컨드 수준에서 서로 번갈아가며 CPU에 의해 처리되는 것이다. 

<br>

## 💡 스레드의 특징과 멀티스레딩
> 스레드는 프로세스 내에서 1개 이상 생성할 수 있고, 스레드는 독립된 stack을 가지지만 heap, data, code를 프로세스 내의 스레드끼리 공유할 수 있기 때문에 컨텍스트 스위칭이 가볍다는 특징을 가지고 있다. 이런 특징으로 가지고 하나의 프로세스의 여러 스레드가 CPU에 의해 동시에 병렬적으로 처리하는 것을 멀티 스레딩이라 부른다. 즉, 하나의 CPU의 여러개의 코어가 있다면, 이 각 각의 코어들에게 스레드를 처리하게 함으로써 하나의 프로세스 진정으로 동시에 실행시킬 뿐 아니라 처리까지 가능하게 하는 것을 의미한다. 이에 여러 프로세스와 여러 스레드가 아주 짧게 쪼개진 Cpu time을 나눠 갖는 것으로 멀티 태스킹의 개념이 확장되었다.


### 추가적인 내용 기술
- 스레드의 특징 중 하나는 프로세는 1개 이상의 스레드를 가질 수 있고, 과거에는 프로세스가 CPU에서 실행되는 단위였으나 스레드가 CPU에서 실행되는 단위로 대체되었다.
- 또한 스레드는 프로세스에 비해 같은 프로세스 내에서 생성된 스레들끼리의 컨텍스트 스위칭이 가볍다는 특징을 있다.
- 단일 프로세서에서 2개의 스레드가 동시에 실행된다면, 컨텍스트 스위칭이 가볍기 때문에 더 높은 효율을 보이고, 듀얼 코어 프로세서에서 실행된다면, 각 스레드는 서로 다른 코어에서 병렬처리되기 때문에 진정한 동시 처리가 가능하다. 이런 종류의 시스템을 멀티스레딩이라 부른다.
- 이 때, 두 개 이상의 CPU나 코어를 활용하는 시스템을 멀티프로세싱이라 부른다.


<br>

## 💡️ 멀티프로세싱과 멀티스레딩의 장단점 이해
> 멀티스레드는 적은 메모리 공간을 차지하고 Context Switching이 빠른 장점이 있지만, 동기화 문제와 하나의 스레드 장애로 전체 스레드가 종료 될 위험을 갖고 있다. 멀티프로세싱은 하나의 프로세스가 죽더라도 다른 프로세스에 영향을 주지 않아 안정성이 높지만, 멀티스레드보다 많은 메모리공간과 CPU 시간을 차지하는 단점이 있다. 즉, 프로세스는 독립적 구조이고, 스레드는 스택만 독립적으로 갖고 있고 나머지 구조를 공유하여 사용하기 때문에 멀티스레드의 처리 비용이 효율적이다. 다만, 스레드 간의 자원 공유라는 점이 전역 변수를 이용하기 때문에 동기화 문제가 발생할 수 있다는 리스크를 갖고 있다. 이에 두 방법은 동시에 여러 작업을 수행하는 점에서 동일하지만, 각각의 장단이 있으므로 적용하는 시스템에 따라 적합한 동작 방식을 선택하고 적용해야 한다.


### 추가적인 내용 기술
- 프로세스는 운영체제로부터 자원을 할당받는 작업의 단위이고 스레드는 프로세스가 할당받은 자원을 이용하는 실행의 단위이다.
- 멀티프로세싱과 멀티스레딩은 CPU의 최대 활용을 위해 프로그램의 여러 부분을 동시에 "실행"시키는 기술이다.
- 멀티프로세싱과 멀티스레딩을 이해하기 위해서는 동시성(Concurrency)과 병렬성(Parallelism)을 이해해야 한다.
- 동시성이란 하나의 CPU 또는 그 코어에 위해 순차적으로 번갈아가며 처리되는 것이다. 이에 동시에 실행시킨 프로세스 또는 스레드가 마치 동시에 실행되는 것과 같은 효과를 준다. 하지만 실제로는 짧은 시간 동안 서로 번갈아가며 처리되는 것이다.
- 병렬성은 CPU내에 여러개의 코어에 동시에 실행시킨 스레드들이 각 각 할당되어 실제로 처리 자체가 동시에 진행되는 것이다. 따라서 병렬성은 CPU 또는 CPU 내에 코어가 여러개일 때만 가능하다.
- 멀티 프로세싱은 다수의 프로세서가 서로 협력적으로 일을 처리하는 것을 의미한다. 컴퓨터는 1대인데 프로세서(CPU)는 2개 이상이다. 보통, 멀티코어시스템(multi-core system)을 포함한다.
- 멀티 스레딩은 하나의 프로세스를 여러 개의 실행 단위이며, 여러 개의 스레드끼리 자원을 공유하며 처리되는 것을 뜻한다.
- 멀티프로세싱은 fork를 통해 프로세스를 여러개로 늘려 프로그램들을 병렬로 처리하며, 멀티스레딩은 하나의 프로세스 안에서 병렬 처리를 한다.
- 이에 멀티 스레딩은 멀티 프로세싱보다 더 효율적이나, 멀티 프로세싱이 안정성은이 더 높다.

<br>